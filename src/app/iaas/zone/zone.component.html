<div>
  <div class="row">
    <div class="col-lg-12">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a routerLink=""><i class="fa fa-dashboard"></i> 控制台</a>
        </li>
        <li class="breadcrumb-item active">
          <i class="fa fa-eercast"></i> 区域管理
        </li>
      </ol>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <a class="btn btn-outline-primary"  href="javascript:void(0)" data-toggle="modal" data-target="#importZoneModal">
        <i class="fa fa-plus mr-1"></i>导入区域
      </a>
      <a class="btn btn-outline-primary" href="javascript:void(0)" (click)="removeZones()">
        <i class="fa fa-minus mr-1"></i>移除区域
      </a>
    </div>
  </div>

  <hr/>

  <div class="row">
    <div class="col-lg-12">
      <div class="card card-default">
        <div class="card-block">
          <div class="table-responsive">
            <table class="table">
              <thead>
              <tr>
                <th>区域名称</th>
                <th>显示名称</th>
                <th>创建时间</th>
                <th>操作</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let zone of zones">
                <td><span *ngIf="!zone.taskId"><input type="checkbox" (change)="checkZoneRemove($event, zone.id)" [value]="zone.id"></span> {{zone.name}}</td>
                <td>{{zone.displayName}}</td>
                <td>{{zone.createTime | date}}</td>
                <td><button data-toggle="modal" class="btn btn-sm btn-danger" (click)="changeName(zone.id)">修改显示名称</button></td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="importZoneModal" tabindex="-1" role="dialog" aria-labelledby="importZoneModalLabel" aria-hidden="true">
  <form #vmsForm="ngForm" (ngSubmit)="importZoneSubmit()">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="createModalLabel">导入区域</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="关闭">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <import-zone  (onSave)="saveChkZoneNames($event) "></import-zone>
        </div>
        <div class="modal-footer">
          <button type="reset" class="btn btn-secondary" data-dismiss="modal" (click)="resetZoneNames()">取消</button>
          <button type="submit" class="btn btn-primary" [disabled]="!importFlag">导入</button>
        </div>
      </div>
    </div>
  </form>
</div>

<div class="modal fade"  style="display: none;" id="changeNameModal" tabindex="0" role="dialog" aria-labelledby="changeNameModal" aria-hidden="true">
  <form #changeNameForm="ngForm" (ngSubmit)="changeNameSubmit()">
    <div class="modal-dialog modal-lg" role="document" style="width:30%">
      <div class="modal-content" style="width:500px">
        <div class="modal-header" style="width:500px">
          <h5 class="modal-title" id="changeNameModalLabel">修改显示名称</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="关闭" >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="width: 500px">
          <div class="row">
            <div class="col col-6">
              <div class="form-group">
                <div class="input-group" style="margin-bottom: 20px;width: 100%;padding-left: 10px;padding-right: 5px">
                  区域名称:&nbsp;&nbsp;&nbsp;
                  <input type="text" class="form-control" id="oldName" readonly [(ngModel)]="oldName" [ngModelOptions]="{standalone: true}">
                </div>
                <div class="input-group" style="width: 100% ;padding-left: 10px;padding-right: 5px">
                  请输入显示名称:&nbsp;&nbsp;&nbsp;<input type="text" #displayName="ngModel" class="form-control" id="newName" [(ngModel)]="newDisplayName" required placeholder="任意字符" [ngModelOptions]="{standalone: true}">
                  <div *ngIf="displayName.invalid && (displayName.dirty || displayName.touched)"
                       class="alert alert-danger">
                    <div *ngIf="displayName.errors.required">
                      名称为必填项
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="width: 100%">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
          <button type="submit" class="btn btn-primary">修改</button>
        </div>
      </div>
    </div>
  </form>
</div>
